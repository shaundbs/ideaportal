{% load static %}
{% load auth_extras %}

{% if not has_access %}

{% include 'components/navbar_reg.html' %}


<div class="nhsuk-width-container app-width-container--full">

  
  <main class="govuk-main-wrapper govuk-main-wrapper--l" id="main-content" role="main">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        
        <div class="card-body">
          <div class="nhsuk-back-link">
      <a class="nhsuk-back-link__link" href="{{request.META.HTTP_REFERER}}">
      <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
      </svg>
      Go back</a>
      </div>

        <h1 class="govuk-heading-l">Access denied</h1>
        <p class="govuk-body">
          You do not have permission to access this page.
        </p>
        <p class="govuk-body">
          This could be because you do not have the correct permissions to access this organisation's page.<br>
          Please contact an administrator or portal manager to request access if this is the case. 
        </p>
      </div>
    </div>
  </main>
</div>
<br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>



{% include 'components/footer.html' %}

          <!-- Data Layer -->
          <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>
  </body>

</html>

  {% else %}


<!doctype html>
<html lang="en">

  <head>
    <style>
      div.scroll {
          margin:5px, 5px;
          padding:5px;
          width: 800px;
          height: 500px;
          overflow-x: hidden;
          overflow-y: auto;
          text-align:justify;
          align-self: center;                    
      }
  </style>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>NHS x IXN Ideas Portal</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/blog/">

    

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- Favicons -->
<link rel="apple-touch-icon" href="/docs/5.0/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/docs/5.0/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/docs/5.0/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/docs/5.0/assets/img/favicons/manifest.json">
<link rel="mask-icon" href="/docs/5.0/assets/img/favicons/safari-pinned-tab.svg" color="#7952b3">
<link rel="icon" href="/docs/5.0/assets/img/favicons/favicon.ico">
<meta name="theme-color" content="#7952b3">

    
    <!-- Custom styles for this template -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="{% static 'frontend/css/blog.css' %}" rel="stylesheet">
  </head>
  <body>
    <! The items of this two nav bar is hard coeded, make sure you change both of them
       in the case you want to edit the nav bar to add/remove item.
       Otherwise, refactor this part.>
    {% if request.user|has_group:"admins" %}
    {% include 'components/navbar_portalmanager.html' %}
    {% elif request.user|has_group:"challenge_managers" %}
    {% include 'components/navbar_portalmanager.html' %}
    {% else %}
    {% include 'components/navbar_search.html' %}
    {% endif %}


    



<main class="container">
  <br>
  <div class="col-md-14 px-9">
    <center><p class="display-4">{{ organisation.name }} Portal Home</p></center>
    
  </div>



 
{% if object.post1 %}
  <div class="p-6 p-md-5 mb-4 text-white rounded bg-dark">
    <div class="col-md-12 px-7">
      <center>
      <p class="display-6">{{ object.post1.title|slice:"75" }}</p>
      <p class="lead my-3">{{ object.post1.description|slice:":500" }}</p>
      <p class="lead mb-0"><a href="{% url 'post_detail' org.slug object.post1.pk object.post1.slug %}" class="text-white fw-bold">Continue reading...</a></p>
    </center>
    </div>
    
  </div>
  {% else %}


 <div class="p-6 p-md-5 mb-4 text-white rounded bg-dark">
  <div class="col-md-12 px-7">
    <center>
      <p class="display-4">Please submit some challenges to begin populating this portal</p>
  </center>
  </div>
  
</div>
    </div>
    
  </div>

  {% endif %}

  
  {% if object.post2 %}

  <div class="row mb-2">
    <div class="col-md-6">

      <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-280 position-relative">
        
        <div class="col p-4 d-flex flex-column position-static">

          <strong class="d-inline-block mb-2 text-primary">{{ object.post2.department }}</strong>
          <center>
          <p class="display-6">{{ object.post2.title|slice:"500" }}</p>
        <div class="mb-1 text-muted">Last edited: {{ object.post2.updated_on}}</div>
          <p class="card-text mb-auto">{{ object.post2.description|slice:":500" }}...</p>

          <p class="lead mb-0"><a href="{% url 'post_detail' org.slug object.post2.pk object.post2.slug %}" class="text-black fw-bold">Continue reading...</a></p>
        </center>
        </div>
{% if  object.post2.image %}
        <section class="nhsuk-hero nhsuk-hero--image nhsuk-hero--image-description">
          <script>
            function randomImage2() {
                var images =[ 
                      "{% static 'frontend/imgs/lightbulb.jpg' %}",
                      
                      "{% static 'frontend/imgs/growth.jpg' %}",
                      
                      "{% static 'frontend/imgs/collaboration.jpg' %}",
                  
                      "{% static 'frontend/imgs/problemsolving.jpeg' %}",
                   
                ]; 
        
                var size = images.length;
                var x = Math.floor(size * Math.random());
                var element = document.getElementsByClassName('nhsuk-hero--image');
                element[0].style["background-image"] = "url({{ object.post2.image.url }})";
                
            }
      
            document.addEventListener("DOMContentLoaded", randomImage2);
        </script>
        
      
        </section>
{% else %}
{% endif %}
        
      </div>
    </div>
    {% else %}
    {% endif %}
    {% if object.post3 %}
    <div class="col-md-6">

      <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-280 position-relative">
        
        <div class="col p-4 d-flex flex-column position-static">
  
          
          <strong class="d-inline-block mb-2 text-primary">{{ object.post3.department }}</strong>
<center>
          <p class="display-6">{{ object.post3.title|slice:"500" }}</p>
   
        <div class="mb-1 text-muted">Last edited: {{ object.post3.updated_on}}</div>

          <p class="card-text mb-auto">{{ object.post3.description|slice:":500" }}...</p>
          <p class="lead mb-0"><a href="{% url 'post_detail' org.slug object.post3.pk object.post3.slug %}" class="text-black fw-bold">Continue reading...</a></p>
        </center>
        </div>
{% if object.post3.image %}
        <section class="nhsuk-hero nhsuk-hero--image nhsuk-hero--image-description">
          <script>
            function randomImage2() {
                var images =[ 
                      "{% static 'frontend/imgs/lightbulb.jpg' %}",
                      
                      "{% static 'frontend/imgs/growth.jpg' %}",
                      
                      "{% static 'frontend/imgs/collaboration.jpg' %}",
                  
                      "{% static 'frontend/imgs/problemsolving.jpeg' %}",
                   
                ]; 
        
                var size = images.length;
                var x = Math.floor(size * Math.random());
                var element = document.getElementsByClassName('nhsuk-hero--image');
                element[1].style["background-image"] = "url({{ object.post3.image.url }})";
                
            }
      
            document.addEventListener("DOMContentLoaded", randomImage2);
        </script>
        
      
        </section>
{% else %}
{% endif %}


        
      </div>
    </div>
{% else %}
{% endif %}

  <div class="row g-5">
    <div class="col-md-8">
        <p class="blog-post-title border-bottom">Notification Centre</p>
        <br>
        <p>*Latest updates*</p>
        <div class="scroll">
       <table class="table">
          <thead>
            <tr>
              <th>Live Challenges</th>
              <th>Updated on</th>

            </tr>
          </thead>
          <tbody>
            {% for item in notifications %}
            <tr>
              <td>{{ forloop.counter }}. <a href="{% url 'post_detail' orgslug item.pk item.slug %}">{{ item.title }}</a></td>
              <td>{{ item.updated_on }}</td>
            </tr>
  
            {% endfor %}
          </tbody>
        </table>
        
        <table class="table">
          <thead>
            <tr>
              <th>Ideas</th>
              <th>Updated on</th>

            </tr>
          </thead>
          <tbody>
            {% for item in idea_notifications %}
            <tr>
              <td>{{ forloop.counter }}. <a href="{% url 'idea_post' orgslug item.pk item.slug %}">{{ item.title }}</a></td>
              <td>{{ item.updated_on }}</td>
            </tr>
  
            {% endfor %}
          </tbody>
        </table>
        <p></p>
</div>
      <p class="blog-post-title border-bottom">Portal summary</p>

      <br>

      <article class="blog-post">
<br>

        {% if organisation.section1 is not None %}
        <p class="mb-0">{% autoescape off %}{{ organisation.section1 }}{% endautoescape %}</p>
        <br>

        {% else %}
        <p class="mb-0">Portal Managers please fill out this section</p>
        <br>
        {% endif %}

      <article class="blog-post">
<br>
        {% if organisation.section2 is not None %}
        <p class="mb-0">{% autoescape off %}{{ organisation.section2 }}{% endautoescape %}</p>
        <br>

        {% else %}
        <p class="mb-0">Portal Managers please fill out this section</p>
        <br>
        {% endif %}

        <article class="blog-post">
        <br>
        {% if organisation.section3 is not None %}
        <p class="mb-0">{% autoescape off %}{{ organisation.section3 }}{% endautoescape %}</p>
        <br>

        {% else %}
        <p class="mb-0">Portal Managers please fill out this section</p>
        <br>
        {% endif %}

        <p class="blog-post-title border-bottom">Leaderboard</p>
        <br>

       <table class="table">
          <thead>
            <tr>
              <th>Username</th>
              <th>Ideas selected</th>
            </tr>
          </thead>
          <tbody>
            {% for item1, item2 in leaderboard_data %}
            <tr>
              <td>{{ forloop.counter }}. {{ item1 }}</td>
              <td>{{ item2 }}</td>
            </tr>
  
            {% endfor %}
          </tbody>
        </table>
        <br>
        
      </article>

      <article class="blog-post">

        <hr>

      <nav class="blog-pagination" aria-label="Pagination">
        <a class="btn btn-outline-primary" href="#">Return to top of page</a>
      </nav>

    </div>

    <div class="col-md-4">
      <div class="position-sticky" style="top: 2rem;">
        <div class="p-4 mb-3 bg-light rounded">
          <div style="text-align:center;">
            <p class="blog-post-title">Scoreboard</p>
            <br>
            <p>Total Challenges</p>
            <p class="blog-post-title">{{ total_challenges }}</p>
            <p>Total Ideas</p>
            <p class="blog-post-title">{{ total_ideas }}</p>

            

        </div>
        </div>

        <div class="p-4">
          <p>Archives</p>
          <ol class="list-unstyled mb-0">
            {% for item1,item2 in date_list %}
            <li><a href="{% url 'bloghub_month' orgslug item1 item2 %}">{{ item1| capfirst }}     {{ item2 }}</a></li>
            {% endfor %}
          </ol>
        </div>

  
      </div>

    </div>
 
  </div>

</main>

{% include 'components/footer.html' %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    
  </body>

</html>
{% endif %}